{"version":3,"sources":["SuccessModal.js"],"names":[],"mappings":"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","file":"SuccessModal-compiled.js","sourcesContent":["import React, {Component} from 'react';\nimport classNames from 'classnames';\nimport '../../theme/css/main.css';\nimport '../../theme/css/adaptive.css';\nimport { connect } from 'react-redux';\n\nclass SuccessModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fadeIn: false\n    };\n  }\n\n  handlerGoToCart() {\n    const { history } = this.props;\n    history.push('/cart');\n  }\n\n  dec(a, b, c, s) {\n  var variants = [a, b, c];\n  var index = s % 100;\n  if (index >=11 && index <= 14) {\n    index = 0;\n  } else {\n    index = (index %= 10) < 5 ? (index > 2 ? 2 : index): 0;\n  }\n  return(variants[index]);\n}\n\n  render() {\n\n    var total = 0;\n    const { session, productsForCart, products } = this.props;\n\n    total = productsForCart.reduce((total, item) => {\n        return total + ((item.count === '' ? 1 : parseInt(item.count, 10)) * parseInt(item.price, 10));\n      }, 0\n    );\n\n    // var screenWidth  = screen.width;//Размер экрана\n    const counts = session.get(\"productCounts\");\n    var windowWidth  = window.innerWidth;\n    const unit = this.dec(\"товаров\", \"товар\", \"товара\", counts); // склоняем по падежам\n    var scrollTopStyle = '1px';\n    var resize = products.get('resize');\n    const productsScrollTop = products.get('scrollTop');\n\n    if ((resize ? resize : windowWidth) > 540) {\n      scrollTopStyle = {\n        top: (productsScrollTop < 113) ? ((113 - productsScrollTop) + 'px') : '1px'\n      };\n    } else {\n      scrollTopStyle = {\n        top: (productsScrollTop < 105) ? ((105 - productsScrollTop) + 'px') : '1px'\n      };\n    }\n\n\n    const modalDialog = classNames({\n      'modal-dialog-success': true,\n      'transition-scale': this.props.successModalDisplay,\n    });\n  return(\n    <div className={modalDialog} style={scrollTopStyle}>\n      <div className=\"modal-content-success\">\n        <div className=\"modal-header-success\">\n          <button type=\"button\" className=\"close\" onClick={this.props.handlerCloseModal}>&times;</button>\n          <h4 className=\"modal-title\" style={{marginBottom: '5px'}}><span style={{textDecoration: 'underline'}}>Корзина</span>: {counts} {unit} <b>{total}</b> Р</h4>\n          <button type=\"button\" className=\"btn btn-default\" style={{width: '100%'}} onClick={this.handlerGoToCart.bind(this)}>Оформить</button>\n        </div>\n      </div>\n    </div>\n  );\n  }\n}\n\nexport default connect(store => ({\n  dispatch: store.dispatch,\n  session: store.session,\n  products: store.products,\n  productsForCart: store.api.get('productsForCart'),\n}))(SuccessModal);\n"]}