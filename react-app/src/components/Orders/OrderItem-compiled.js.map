{"version":3,"sources":["OrderItem.js"],"names":[],"mappings":"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","file":"OrderItem-compiled.js","sourcesContent":["import React, {Component} from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport '../../theme/css/bootstrap-datepicker3.min.css';\nimport '../../theme/css/main.css';\nimport '../../theme/css/adaptive.css';\nimport {\n  showOrdersQuotaInCart\n} from '../../api';\n// import * as modelActions from './actions';\n\nclass OrderItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orderNum: false,\n      tdBotyVisible: false\n    };\n  }\n\n  componentWillMount() {\n    const { dispatch } = this.props;\n    showOrdersQuotaInCart(dispatch);\n  }\n\n  handleClickOrder() {\n    var orderNum = this.state.orderNum;\n    var isVisible = this.state.tdBotyVisible;\n\n    this.setState({\n      orderNum: !orderNum,\n      tdBotyVisible: !isVisible\n    })\n  }\n\n  render() {\n    const { ordersQuota } = this.props;\n    var items = this.props.item;\n\n    const orderNumberInp = classNames({\n      'order-number-inp': true,\n    });\n    const totalStyle = {\n      margin: '10px'\n    }\n\n    var productsTr = items.map((item, index) => {\n        if(index !== 0) {\n          return <tr key={index}>\n            <td className=\"table-40-procent-td\">\n              <img className=\"cart-product-image\" src={item.image_path}/>\n              <span>{item.name}</span>\n            </td>\n            <td>{item.price} ₽ / {item.unit}</td>\n            <td style={{textAlign: 'start'}}>\n              <div className=\"order-table__cell\">\n                <div className=\"b-number\">\n                  <div className=\"order-number\" style={{width: '70px', border: '2px solid #f9f9f9'}}>\n                    <div className=\"order-number__field\">\n                      <input\n                        disabled\n                        className={orderNumberInp}\n                        type=\"number\"\n                        max=\"99\"\n                        min=\"0\"\n                        value={item.counts}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </td>\n            <td>{item.cost} ₽</td>\n            <td style={{color: 'firebrick'}}>\n            <span\n              className=\"remove-product\"\n              aria-hidden=\"true\"\n            >\n            </span>\n            </td>\n          </tr>\n        }\n      }\n    );\n\n    var headTd = null;\n    const thStyle = {\n      textAlign: 'left',\n      width: '100%',\n      letterSpacing: '0.05em',\n      fontWeight: '400 !important'\n    }\n\n    if (!this.state.orderNum) {\n      headTd = <tr className=\"order-tr-head\" onClick={this.handleClickOrder.bind(this)}>\n        <th className=\"order-th-head\">Заказ № ST-{this.props.orderId} от {this.props.orderDate}</th>\n        <th className=\"table-25-procent\"></th>\n        <th className=\"table-25-procent\"></th>\n        <th className=\"table-10-procent\"></th>\n        <th className=\"table-10-procent\"></th>\n      </tr>\n    } else {\n      headTd = <tr className=\"order-tr-head\" onClick={this.handleClickOrder.bind(this)}>\n        <th className=\"table-30-procent\">Продукт</th>\n        <th className=\"table-25-procent\">Цена</th>\n        <th className=\"table-25-procent\">Количество</th>\n        <th className=\"table-10-procent\">Стоимость</th>\n        <th className=\"table-10-procent\"></th>\n      </tr>\n    }\n\n    var itemsForTotal = items.filter((number, index) => index !== 0);\n    var total = itemsForTotal.reduce((total, item) => total + item.cost, 0);\n\n    var orderInfo = <div className=\"order-info\">\n      <span>Заказ № ST-{this.props.orderId} от {this.props.orderDate}</span>\n      <span>Дата доставки {ordersQuota.delivery && ordersQuota.delivery.delivery_date}</span>\n      {\n        this.props.timeQuota !== '' ?\n        <span>Период получения заказа {this.props.timeQuota}</span> :\n          <span>Заказ можно получить в любое удобное время в указанный день доставки.</span>\n      }\n    </div>\n\n    return (\n      <div className=\"orders-item\">\n        { this.state.tdBotyVisible &&  orderInfo }\n        <table className=\"cart-products-table margin-off\">\n          <thead>\n            { headTd }\n          </thead>\n          <tbody>\n            { this.state.tdBotyVisible && productsTr }\n          </tbody>\n        </table>\n        {\n          this.state.tdBotyVisible &&\n          <div className=\"cart-order__total\" style={totalStyle}>Итог:&nbsp;<span>{ total } ₽</span></div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(store => ({\n  dispatch: store.dispatch,\n  session: store.session,\n  api: store.api,\n  ordersQuota: store.api.get('ordersQuota'),\n  products: store.products,\n}))(OrderItem);"]}