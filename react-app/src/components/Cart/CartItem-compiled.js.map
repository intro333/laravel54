{"version":3,"sources":["CartItem.js"],"names":[],"mappings":"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","file":"CartItem-compiled.js","sourcesContent":["import React, {Component} from 'react';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport '../../theme/css/main.css';\nimport '../../theme/css/adaptive.css';\nimport {\n  addProductToCart,\n  deleteProductFromCart,\n} from '../../api';\nimport * as modelActions from '../../actions';\nimport FaClose from 'react-icons/lib/fa/close';\n\nclass CartItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orderNumberInp: props.count,\n      errorBorderRed: false,\n      inputPlaceHolder: ''\n    }\n  }\n\n  componentWillMount() {\n    if(this.props.item.count === \"\") {\n      this.setState({\n        errorBorderRed: true,\n        inputPlaceHolder: '?'\n      });\n    }\n  }\n  addProductToCart(productCounts) {\n    const { dispatch } = this.props;\n\n    dispatch(modelActions.setLoaderStatus(true));\n\n    if (Number.isInteger(productCounts)) {\n      const data = {\n        barCode: this.props.item.barCode,\n        productId: this.props.item.productId,\n        productCounts: productCounts,\n      };\n      addProductToCart(dispatch, data);\n    } else if (typeof productCounts === 'string' && productCounts !== '') {\n      const data = {\n        barCode: this.props.item.barCode,\n        productId: this.props.item.productId,\n        productCounts: parseInt(productCounts),\n      };\n      addProductToCart(dispatch, data);\n    } else {\n      const data = {\n        barCode: this.props.item.barCode,\n        productId: this.props.item.productId,\n        productCounts: '',\n      };\n      addProductToCart(dispatch, data);\n      this.setState({\n        errorBorderRed: true,\n        inputPlaceHolder: '?'\n      });\n    }\n  }\n\n  setPlusNumber() {\n    var inputVal = this.props.item.count;\n    if (Number.isInteger(inputVal) && (inputVal < 99)) {\n      this.addProductToCart(parseInt(inputVal) + 1)\n    } else if (inputVal === \"\") {\n      this.setState({\n        errorBorderRed: false\n      });\n      this.addProductToCart(1)\n    } else {\n      this.setState({\n        errorBorderRed: false\n      });\n      this.addProductToCart(1)\n    }\n  }\n\n  setMinusNumber() {\n    var inputVal = this.props.item.count;\n    if (Number.isInteger(inputVal) && (inputVal > 1)) {\n      this.addProductToCart(parseInt(inputVal) - 1)\n    } else if (inputVal === \"\") {\n      this.setState({\n        errorBorderRed: false\n      });\n      this.addProductToCart(1)\n    } else {\n      this.setState({\n        errorBorderRed: false\n      });\n      this.addProductToCart(1)\n    }\n  }\n\n  setChangeNumber(e) {\n    var targetValue = e.target.value;\n\n    if(targetValue <= 99 && targetValue > 0 || targetValue === '') {\n      this.setState({\n        errorBorderRed: false,\n        inputPlaceHolder: ''\n      });\n      this.addProductToCart(targetValue)\n    }\n  }\n\n  deleteProductFromCart() {\n    const { dispatch, history } = this.props;\n    const data = {\n      barCode: this.props.item.barCode,\n      productId: this.props.item.productId\n    };\n    dispatch(modelActions.setLoaderStatus(true));\n    deleteProductFromCart(dispatch, data, history);\n  }\n\n  render() {\n    const orderNumberInp = classNames({\n      'order-number-inp': true,\n      'error-border-red': this.state.errorBorderRed\n    });\n    var inputVal = (this.props.item.count === '' ? '' : parseInt(this.props.item.count));\n    var inputPlaceHolder = this.state.inputPlaceHolder;\n    var cost = this.props.item.price * (inputVal === '' ? 1 : parseInt(this.props.item.count));\n\n    return (\n      <tr key={this.props.keyProductId}>\n        <td className=\"table-40-procent-td\">\n          <img className=\"cart-product-image\" src={'/storage/images/products/' + this.props.item.imagePath} />\n          <span>{this.props.item.name}</span>\n        </td>\n        <td>{this.props.item.price} ла / {this.props.item.unit}</td>\n        <td style={{textAlign: 'start'}}>\n          <div className=\"order-table__cell\">\n            <div className=\"b-number\">\n              <div className=\"order-number\">\n                <div className=\"order-number__field\">\n                  <input\n                    className={orderNumberInp}\n                    type=\"number\"\n                    max=\"99\"\n                    min=\"0\"\n                    value={inputVal ? inputVal : ''}\n                    placeholder={inputPlaceHolder}\n                    onChange={this.setChangeNumber.bind(this)}\n                  />\n                </div>\n                <div\n                  className=\"order-number__spin minus\"\n                  onClick={this.setMinusNumber.bind(this)}\n                ></div>\n                <div\n                  className=\"order-number__spin plus\"\n                  onClick={this.setPlusNumber.bind(this)}\n                ></div>\n              </div>\n            </div>\n          </div>\n        </td>\n        <td>{cost} ла</td>\n        <td style={{color: 'firebrick'}}>\n          <span\n            className=\"remove-product\"\n            onClick={this.deleteProductFromCart.bind(this)}\n          ><FaClose size=\"25\" />\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default connect(store => ({\n  dispatch: store.dispatch,\n  session: store.session,\n  api: store.api,\n  products: store.products,\n}))(CartItem);"]}