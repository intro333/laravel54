{"version":3,"sources":["CartItem.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;AACA;;;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;AAIA;;IAEM,Q;;;AAEJ,oBAAY,KAAZ,EAAmB;AAAA;;AAAA,oHACX,KADW;;AAEjB,UAAK,KAAL,GAAa;AACX,sBAAgB,MAAM,KADX;AAEX,sBAAgB,KAFL;AAGX,wBAAkB;AAHP,KAAb;AAFiB;AAOlB;;;;qCAEgB,a,EAAe;AAAA,UACtB,QADsB,GACT,KAAK,KADI,CACtB,QADsB;;AAE9B,UAAI,aAAJ,EAAmB;AACjB,YAAM,OAAO;AACX,mBAAS,KAAK,KAAL,CAAW,IAAX,CAAgB,OADd;AAEX,qBAAW,KAAK,KAAL,CAAW,IAAX,CAAgB,SAFhB;AAGX,yBAAe;AAHJ,SAAb;AAKA,mCAAiB,QAAjB,EAA2B,IAA3B;AACA;AACA,gBAAQ,GAAR,CAAY,UAAZ,EAAwB,IAAxB;AACA,gBAAQ,GAAR,CAAY,UAAZ,EAAwB,aAAxB;AACD,OAVD,MAUO;AACL,YAAM,QAAO;AACX,mBAAS,KAAK,KAAL,CAAW,IAAX,CAAgB,OADd;AAEX,qBAAW,KAAK,KAAL,CAAW,IAAX,CAAgB,SAFhB;AAGX,yBAAe;AAHJ,SAAb;AAKA,mCAAiB,QAAjB,EAA2B,KAA3B;AACA,aAAK,QAAL,CAAc;AACZ,0BAAgB,IADJ;AAEZ,4BAAkB;AAFN,SAAd;AAID;AACF;;;oCAEe;AACd,UAAI,WAAW,KAAK,KAAL,CAAW,IAAX,CAAgB,KAA/B;AACA,cAAQ,GAAR,CAAY,WAAZ,EAAyB,QAAzB;AACA,UAAI,WAAW,EAAf,EAAmB;AACjB,aAAK,gBAAL,CAAsB,SAAS,QAAT,IAAqB,CAA3C;AACD,OAFD,MAEO,IAAI,CAAC,QAAL,EAAe;AACpB,aAAK,QAAL,CAAc;AACZ,0BAAgB;AADJ,SAAd;AAGA,aAAK,gBAAL,CAAsB,GAAtB;AACD;AACF;;;qCAEgB;AACf,UAAI,WAAW,SAAS,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAzB,CAAf;AACA,cAAQ,GAAR,CAAY,WAAZ,EAAyB,QAAzB;AACA,UAAI,WAAW,CAAf,EAAkB;AAChB,aAAK,gBAAL,CAAsB,SAAS,QAAT,IAAqB,CAA3C;AACD,OAFD,MAEO,IAAI,aAAa,IAAb,IAAqB,YAAY,WAAjC,IAAgD,MAAM,QAAN,CAApD,EAAqE;AAC1E,aAAK,QAAL,CAAc;AACZ,0BAAgB;AADJ,SAAd;AAGA,aAAK,gBAAL,CAAsB,GAAtB;AACD;AACF;;;oCAEe,C,EAAG;AACjB,UAAI,cAAc,EAAE,MAAF,CAAS,KAA3B;AACA,UAAG,eAAe,EAAf,IAAqB,cAAc,CAAnC,IAAwC,gBAAgB,EAA3D,EAA+D;AAC7D,aAAK,QAAL,CAAc;AACZ,0BAAgB,KADJ;AAEZ,4BAAkB;AAFN,SAAd;AAIA,aAAK,gBAAL,CAAsB,WAAtB;AACA,gBAAQ,GAAR,CAAY,aAAZ,EAA2B,WAA3B;AACD;AACF;;;6BAEQ;AACP,UAAM,iBAAiB,0BAAW;AAChC,4BAAoB,IADY;AAEhC,4BAAoB,KAAK,KAAL,CAAW;AAFC,OAAX,CAAvB;AAIA,UAAI,WAAW,KAAK,KAAL,CAAW,IAAX,CAAgB,KAA/B;AACA,UAAI,mBAAmB,KAAK,KAAL,CAAW,gBAAlC;AACA,UAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,GAAwB,QAAnC;;AAEA,aACE;AAAA;AAAA;AACE;AAAA;AAAA,YAAI,WAAU,qBAAd;AACE,iDAAK,WAAU,oBAAf,EAAoC,KAAK,KAAK,KAAL,CAAW,IAAX,CAAgB,SAAzD,GADF;AAEE;AAAA;AAAA;AAAO,iBAAK,KAAL,CAAW,IAAX,CAAgB;AAAvB;AAFF,SADF;AAKE;AAAA;AAAA;AAAK,eAAK,KAAL,CAAW,IAAX,CAAgB,KAArB;AAAA;AAAiC,eAAK,KAAL,CAAW,IAAX,CAAgB;AAAjD,SALF;AAME;AAAA;AAAA,YAAI,OAAO,EAAC,WAAW,OAAZ,EAAX;AACE;AAAA;AAAA,cAAK,WAAU,mBAAf;AACE;AAAA;AAAA,gBAAK,WAAU,UAAf;AACE;AAAA;AAAA,kBAAK,WAAU,cAAf;AACE;AAAA;AAAA,oBAAK,WAAU,qBAAf;AACE;AACE,+BAAW,cADb;AAEE,0BAAK,QAFP;AAGE,yBAAI,IAHN;AAIE,yBAAI,GAJN;AAKE,2BAAO,WAAW,QAAX,GAAsB,EAL/B;AAME,iCAAa,gBANf;AAOE,8BAAU,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B;AAPZ;AADF,iBADF;AAYE;AACE,6BAAU,0BADZ;AAEE,2BAAS,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB;AAFX,kBAZF;AAgBE;AACE,6BAAU,yBADZ;AAEE,2BAAS,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB;AAFX;AAhBF;AADF;AADF;AADF,SANF;AAiCE;AAAA;AAAA;AAAK,cAAL;AAAA;AAAA,SAjCF;AAkCE;AAAA;AAAA,YAAI,OAAO,EAAC,OAAO,WAAR,EAAX;AACE,kDAAM,WAAU,0CAAhB,EAA2D,eAAY,MAAvE;AADF;AAlCF,OADF;AAwCD;;;;;;kBAGY,yBAAQ;AAAA,SAAU;AAC/B,cAAU,MAAM,QADe;AAE/B,aAAS,MAAM,OAFgB;AAG/B,SAAK,MAAM,GAHoB;AAI/B,cAAU,MAAM;AAJe,GAAV;AAAA,CAAR,EAKX,QALW,C","file":"CartItem-compiled.js","sourcesContent":["import React, {Component} from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport '../../theme/css/bootstrap-datepicker3.min.css';\nimport '../../theme/css/main.css';\nimport '../../theme/css/adaptive.css';\nimport {\n  addProductToCart,\n  showProductsInCart\n} from '../../api';\n// import * as modelActions from './actions';\n\nclass CartItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orderNumberInp: props.count,\n      errorBorderRed: false,\n      inputPlaceHolder: ''\n    }\n  }\n\n  addProductToCart(productCounts) {\n    const { dispatch } = this.props;\n    if (productCounts) {\n      const data = {\n        barCode: this.props.item.barCode,\n        productId: this.props.item.productId,\n        productCounts: productCounts,\n      };\n      addProductToCart(dispatch, data);\n      // showProductsInCart(dispatch);\n      console.log(\"datadata\", data);\n      console.log(\"datadata\", productCounts)\n    } else {\n      const data = {\n        barCode: this.props.item.barCode,\n        productId: this.props.item.productId,\n        productCounts: null,\n      };\n      addProductToCart(dispatch, data);\n      this.setState({\n        errorBorderRed: true,\n        inputPlaceHolder: '?'\n      });\n    }\n  }\n\n  setPlusNumber() {\n    var inputVal = this.props.item.count;\n    console.log(\"inputVal+\", inputVal)\n    if (inputVal < 99) {\n      this.addProductToCart(parseInt(inputVal) + 1)\n    } else if (!inputVal) {\n      this.setState({\n        errorBorderRed: false\n      });\n      this.addProductToCart('1')\n    }\n  }\n\n  setMinusNumber() {\n    var inputVal = parseInt(this.props.item.count);\n    console.log(\"inputVal-\", inputVal)\n    if (inputVal > 1) {\n      this.addProductToCart(parseInt(inputVal) - 1)\n    } else if (inputVal === null || inputVal == 'undefined' || isNaN(inputVal)) {\n      this.setState({\n        errorBorderRed: false\n      });\n      this.addProductToCart('1')\n    }\n  }\n\n  setChangeNumber(e) {\n    var targetValue = e.target.value;\n    if(targetValue <= 99 && targetValue > 0 || targetValue === '') {\n      this.setState({\n        errorBorderRed: false,\n        inputPlaceHolder: ''\n      });\n      this.addProductToCart(targetValue)\n      console.log(\"targetValue\", targetValue)\n    }\n  }\n\n  render() {\n    const orderNumberInp = classNames({\n      'order-number-inp': true,\n      'error-border-red': this.state.errorBorderRed\n    });\n    var inputVal = this.props.item.count;\n    var inputPlaceHolder = this.state.inputPlaceHolder;\n    var cost = this.props.item.price * inputVal;\n\n    return (\n      <tr>\n        <td className=\"table-40-procent-td\">\n          <img className=\"cart-product-image\" src={this.props.item.imagePath} />\n          <span>{this.props.item.name}</span>\n        </td>\n        <td>{this.props.item.price} ₽ / {this.props.item.unit}</td>\n        <td style={{textAlign: 'start'}}>\n          <div className=\"order-table__cell\">\n            <div className=\"b-number\">\n              <div className=\"order-number\">\n                <div className=\"order-number__field\">\n                  <input\n                    className={orderNumberInp}\n                    type=\"number\"\n                    max=\"99\"\n                    min=\"0\"\n                    value={inputVal ? inputVal : ''}\n                    placeholder={inputPlaceHolder}\n                    onChange={this.setChangeNumber.bind(this)}\n                  />\n                </div>\n                <div\n                  className=\"order-number__spin minus\"\n                  onClick={this.setMinusNumber.bind(this)}\n                ></div>\n                <div\n                  className=\"order-number__spin plus\"\n                  onClick={this.setPlusNumber.bind(this)}\n                ></div>\n              </div>\n            </div>\n          </div>\n        </td>\n        <td>{cost} ₽</td>\n        <td style={{color: 'firebrick'}}>\n          <span className=\"remove-product glyphicon glyphicon-trash\" aria-hidden=\"true\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default connect(store => ({\n  dispatch: store.dispatch,\n  session: store.session,\n  api: store.api,\n  products: store.products,\n}))(CartItem);"]}