{"version":3,"sources":["api.js"],"names":[],"mappings":"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","file":"api-compiled.js","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport * as modelActions from './actions';\n\nexport const makeRequest = (dispatcher, params, then, error) => {\n  axios(params).then((result) => {\n    if (then) then(result);\n  }).catch(r => {\n    if (error) error(r);\n  });\n};\n\n//Пример с параметрами\nexport const fetch = (dispatcher, options, then, error) => {\n  makeRequest(\n    dispatcher,\n    options,\n    r => {\n      if (then) then(r.data);\n    },\n    error\n  );\n};\n\n//Выход, разлогиниться.\nexport const logOut = token => {\n  const params = {\n    method:'post',\n    url:'/logout',\n    data: token\n  };\n\n  const then = response => {\n    window.location.href = '/';\n  };\n\n  const error = (error) => {\n    console.log(\"error\", error);\n  };\n\n  makeRequest('', params, then, error);\n};\n\n//Получить все категории.\nexport const setCategories = dispatcher => {\n  const params = {\n    method:'post',\n    url:'/api/get-categories',\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setCategories(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Получить продукты нужной категории.\nexport const setProducts = (dispatcher, productId) => {\n  const params = {\n    method:'post',\n    url:'/api/get-products/' + productId,\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setProducts(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Получить количество товаров, которые уже в заказе.\nexport const getProductCounts = (dispatcher) => {\n  const params = {\n    method:'post',\n    url:'/api/get-product-counts'\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setProductCounts(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Добавить товар в корзину.\nexport const addProductToCart = (dispatcher, data) => {\n  const params = {\n    method:'post',\n    url:'/api/add-product-to-cart',\n    data: data\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setProductsForCart(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Показать товар в корзине.\nexport const showProductsInCart = (dispatcher) => {\n  const params = {\n    method:'post',\n    url:'/api/get-products-in-cart'\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setProductsForCart(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Удалить товар из корзины.\nexport const deleteProductFromCart = (dispatcher, data) => {\n  const params = {\n    method:'post',\n    url:'/api/delete-product-from-cart',\n    data: data\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setProductsForCart(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Отправить заказ.\nexport const sendOrder = (dispatcher, data, history) => {\n  const params = {\n    method:'post',\n    url:'/api/send-order',\n    data: data\n  };\n\n  const then = response => {\n    if (response.data.successTime) {\n      history.push('/sussess-page');//TODO редирект на страницу успешного завершения отправления заказа\n    } else if (response.data.errorTime) {\n      dispatcher(modelActions.setErrors(response.data));\n      showOrdersQuotaInCart(dispatcher);\n    }\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Очистить корзину.\nexport const clearCart = (dispatcher, history) => {\n  const params = {\n    method:'post',\n    url:'/api/clear-cart'\n  };\n\n  const then = response => {\n    if (response.status === 200) {\n      history.push('/');\n    }\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Показать квоты в корзине.\nexport const showOrdersQuotaInCart = (dispatcher) => {\n  const params = {\n    method:'post',\n    url:'/api/get-orders-quota-in-cart'\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setOrdersQuotaForCart(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Прочекать квоты в корзине на наличие 0.\nexport const checkTimeQuota = (dispatcher, data) => {\n  const params = {\n    method:'post',\n    url:'/api/check-time-quota-in-cart',\n    data: data\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setCheckTimeQuotaForCart(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Получить данные для личного кабинета\nexport const setUserInfo = dispatcher => {\n  const params = {\n    method:'post',\n    url:'/api/getUserInfo',\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setUserInfo(response.data));\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Сохранить данные личного кабинета\nexport const updatePersonalData = (dispatcher, data) => {\n  const params = {\n    method:'post',\n    url:'/api/update-data-of-personal-account',\n    data: data\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setUserInfo(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Изменить фото в личном аккаунте\nexport const changePhotoPersonalData = (dispatcher, data) => {\n  console.log(\"dataOfFile\", data)\n  let form = new FormData();\n  form.append('image', data['image']);\n  // form.append('name', name);\n  const params = {\n    method:'post',\n    url:'/api/change-photo-in-personal-account',\n    data: form\n  };\n\n  const then = response => {\n    console.log('image data', response.data)\n    dispatcher(modelActions.setUserImage(response.data))\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Получить все заказы пользователя\nexport const ordersGetAll = (dispatcher, data) => {\n  const params = {\n    method:'post',\n    url:'/api/orders-get-all',\n    data: data\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setOrders(response.data));\n    // console.log('ordersGetAll response.data', response.data);\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Отменить или удалить заказ\nexport const cancelOrDeleteOrder = (dispatcher, data, history) => {\n  const params = {\n    method:'post',\n    url:'/api/order-cancel-or-delete',\n    data: data\n  };\n\n  const then = response => {\n    // history.push('/orders');\n    if(response.data === 1)\n      dispatcher(modelActions.componentWillReceivePropsChange(true));\n    // console.log('ordersGetAll response.data', response.data);\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};\n\n//Повторить заказ\nexport const repeatOrChangeOrder = (dispatcher, data, history) => {\n  const params = {\n    method:'post',\n    url:'/api/order-repeat-or-change',\n    data: data\n  };\n\n  const then = response => {\n    dispatcher(modelActions.setProductsForCart(response.data));\n    history.push('/cart');\n  };\n\n  const error = (error) => {\n    console.log(error);\n  };\n\n  makeRequest(dispatcher, params, then, error);\n};"]}